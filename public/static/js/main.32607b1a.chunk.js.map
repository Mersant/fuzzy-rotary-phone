{"version":3,"sources":["utils/mutations.js","utils/queries.js","utils/auth.js","components/NewJournalEntry/index.js","pages/Home.js","pages/Signup.js","pages/Login.js","components/AllJournals/index.js","pages/Profile.js","components/Header/index.js","App.js","index.js"],"names":["LOGIN_USER","gql","ADD_USER","ADD_JOURNAL","QUERY_ME","decode","this","getToken","token","isTokenExpired","exp","Date","now","localStorage","removeItem","getItem","idToken","setItem","window","location","assign","reload","NewJournalEntry","useState","journalText","image","journalForm","setJournalForm","useMutation","addJournal","error","data","handleChange","event","target","name","value","handleFormSubmit","preventDefault","variables","console","log","Auth","loggedIn","id","onSubmit","htmlFor","type","onChange","className","required","placeholder","to","message","Home","props","journal","journals","Signup","username","email","password","formState","setFormState","addUser","login","style","cursor","Login","AllJournals","length","map","_id","createdAt","Profile","getProfile","useQuery","loading","user","me","Header","class","onClick","logout","httpLink","createHttpLink","uri","authLink","setContext","_","headers","authorization","client","ApolloClient","link","concat","cache","InMemoryCache","App","ApolloProvider","path","element","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.32607b1a.chunk.js","sourcesContent":["import { gql } from '@apollo/client';\r\n\r\nexport const LOGIN_USER = gql`\r\n  mutation login($email: String!, $password: String!) {\r\n    login(email: $email, password: $password) {\r\n      token\r\n      user {\r\n        _id\r\n        username\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ADD_USER = gql`\r\n  mutation addUser($username: String!, $email: String!, $password: String!) {\r\n    addUser(username: $username, email: $email, password: $password) {\r\n      token\r\n      user {\r\n        _id\r\n        username\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ADD_JOURNAL = gql`\r\n  mutation addJournal($journalText: String!,$image:String) {\r\n    addJournal(journalText:$journalText, image:$image) {\r\n      _id\r\n      journalText\r\n      image\r\n      createdAt\r\n    }\r\n  }\r\n`;\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { gql } from '@apollo/client';\r\n\r\nexport const QUERY_USER = gql`\r\n  query user($username: String!) {\r\n    user(username: $username) {\r\n      _id\r\n      username\r\n      journalHistory {\r\n        _id\r\n        journalText\r\n        image\r\n        createdAt\r\n      }\r\n    }\r\n  }\r\n`;\r\nexport const QUERY_JOURNALS = gql`\r\n  query getJournals {\r\n    journals {\r\n      _id\r\n      journalText\r\n      image\r\n      createdAt\r\n    }\r\n  }\r\n`;\r\n\r\n\r\nexport const QUERY_SINGLE_JOURNAL = gql`\r\n  query getSingleJournal($journalId: ID!) {\r\n    journal(journalId: $journalId) {\r\n      _id\r\n      image\r\n      journalText\r\n      createdAt\r\n    }\r\n  }\r\n`;\r\n\r\nexport const QUERY_ME = gql`\r\n  query me {\r\n    me {\r\n      _id\r\n      username\r\n      email\r\n      journal {\r\n        _id\r\n        journalText \r\n        image\r\n        createdAt\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\n\r\n\r\n","import decode from 'jwt-decode';\r\n\r\nclass AuthService {\r\n  getProfile() {\r\n    return decode(this.getToken());\r\n  }\r\n\r\n  loggedIn() {\r\n    const token = this.getToken();\r\n    // If there is a token and it's not expired, return `true`\r\n    return token && !this.isTokenExpired(token) ? true : false;\r\n  }\r\n\r\n  isTokenExpired(token) {\r\n    // Decode the token to get its expiration time that was set by the server\r\n    const decoded = decode(token);\r\n    // If the expiration time is less than the current time (in seconds), the token is expired and we return `true`\r\n    if (decoded.exp < Date.now() / 1000) {\r\n      localStorage.removeItem('id_token');\r\n      return true;\r\n    }\r\n    // If token hasn't passed its expiration time, return `false`\r\n    return false;\r\n  }\r\n\r\n  getToken() {\r\n    return localStorage.getItem('id_token');\r\n  }\r\n\r\n  login(idToken) {\r\n    localStorage.setItem('id_token', idToken);\r\n    window.location.assign('/');\r\n  }\r\n\r\n  logout() {\r\n    localStorage.removeItem('id_token');\r\n    window.location.reload();\r\n  }\r\n}\r\n\r\nexport default new AuthService();\r\n","import React, { useState } from \"react\";\r\nimport { Link } from 'react-router-dom'\r\nimport { useMutation } from '@apollo/client'\r\nimport { ADD_JOURNAL } from '../../utils/mutations'\r\nimport '../../styles/NewJournalEntry.css'\r\nimport { QUERY_ME, QUERY_SINGLE_JOURNAL } from '../../utils/queries'\r\nimport Auth from '../../utils/auth'\r\n\r\nconst NewJournalEntry = () => {\r\n\r\n\tconst [journalForm, setJournalForm] = useState({\r\n\t\tjournalText: \"\",\r\n\t\timage: \"\",\r\n\t});\r\n\r\n\tconst [addJournal, { error, data }] = useMutation(ADD_JOURNAL);\r\n\r\n\tconst handleChange = (event) => {\r\n\t\tconst { name, value } = event.target;\r\n\t\tsetJournalForm({\r\n\t\t\t...journalForm,\r\n\t\t\t[name]: value,\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleFormSubmit = async (event) => {\r\n\t\tevent.preventDefault();\r\n\t\ttry {\r\n\t\t\tconst { data } = await addJournal({\r\n\t\t\t\tvariables: {\r\n\t\t\t\t\t...journalForm\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(err);\r\n\t\t\tconsole.log(data);\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<main>\r\n\t\t\t{Auth.loggedIn() ? (\r\n\t\t\t\t<form id='newJournalEntryForm' onSubmit={handleFormSubmit}>\r\n\t\t\t\t\t<label htmlFor=\"message\" >Inscribe Thy Thoughts:</label>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tname=\"journalText\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tvalue={journalForm.journalText}\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\tid='journalEntryTextArea'\r\n\t\t\t\t\t\t\tclassName=\"centerBlock\"\r\n\t\t\t\t\t\t\trequired />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label htmlFor=\"image\">Bind Them to an Image:</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tname=\"image\"\r\n\t\t\t\t\t\t\tplaceholder=\"Imgur image link\"\r\n\t\t\t\t\t\t\tid=\"journalImageLink\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tvalue={journalForm.image}\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button id=\"submitJournalButton\" type=\"submit\">And Commit them Eternally</button>\r\n\t\t\t\t</form>\r\n\r\n\t\t\t) : (\r\n\t\t\t\t<p id=\"loginError\">\r\n\t\t\t\t\tYou need to be logged in to view your journal. Please{' '}\r\n\t\t\t\t\t<Link className=\"homeLink\" to=\"/login\">login</Link> or <Link className=\"homeLink\" to=\"/signup\">signup.</Link>\r\n\t\t\t\t</p>\r\n\t\t\t)}\r\n\t\t\t{error && (\r\n\t\t\t\t<div className=\"my-3 p-3 bg-danger text-white errorMessage\">\r\n\t\t\t\t\t{error.message}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</main>\r\n\t)\r\n};\r\n\r\nexport default NewJournalEntry;\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\n\r\nimport NewJournalEntry from '../components/NewJournalEntry';\r\n\r\n\r\nconst Home = (props) => {\r\n  const journal = props.journal;\r\n  return (\r\n    <main>\r\n      <div className=\"flex-row justify-center\">\r\n        <div\r\n        >\r\n        </div>\r\n        <div className=\"col-12 col-md-8 mb-3\">\r\n\r\n        <NewJournalEntry\r\n        journals={journal}\r\n        />\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Home;","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { useMutation } from '@apollo/client';\r\nimport { ADD_USER } from '../utils/mutations';\r\n\r\nimport Auth from '../utils/auth';\r\n\r\nconst Signup = () => {\r\n  const [formState, setFormState] = useState({\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n  });\r\n  const [addUser, { error, data }] = useMutation(ADD_USER);\r\n\r\n  const handleChange = (event) => {\r\n    const { name, value } = event.target;\r\n\r\n    setFormState({\r\n      ...formState,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleFormSubmit = async (event) => {\r\n    event.preventDefault();\r\n    console.log(formState);\r\n\r\n    try {\r\n      const { data } = await addUser({\r\n        variables: { ...formState },\r\n      });\r\n\r\n      Auth.login(data.addUser.token);\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"flex-row justify-center mb-4\">\r\n      <div className=\"col-12 col-lg-10\">\r\n        <div className=\"card\">\r\n          <h2 className=\"card-header bg-dark text-white p-2 text-center\">Sign Up</h2>\r\n          <div className=\"card-body\">\r\n            {data ? (\r\n              <p>\r\n                Welcome! You can now head{' '}\r\n                <Link to=\"/\">back to the homepage.</Link>\r\n              </p>\r\n            ) : (\r\n              <form onSubmit={handleFormSubmit}>\r\n                <input\r\n                  className=\"form-input\"\r\n                  placeholder=\"Your username text\"\r\n                  name=\"username\"\r\n                  type=\"text\"\r\n                  value={formState.name}\r\n                  onChange={handleChange}\r\n                />\r\n                <input\r\n                  className=\"form-input\"\r\n                  placeholder=\"Your email\"\r\n                  name=\"email\"\r\n                  type=\"email\"\r\n                  value={formState.email}\r\n                  onChange={handleChange}\r\n                />\r\n                <input\r\n                  className=\"form-input\"\r\n                  placeholder=\"******\"\r\n                  name=\"password\"\r\n                  type=\"password\"\r\n                  value={formState.password}\r\n                  onChange={handleChange}\r\n                />\r\n                <button\r\n                  className=\"btn btn-block btn-primary\"\r\n                  style={{ cursor: 'pointer' }}\r\n                  type=\"submit\"\r\n                >\r\n                  Submit\r\n                </button>\r\n              </form>\r\n            )}\r\n\r\n            {error && (\r\n              <div className=\"my-3 p-3 bg-danger text-white errorMessage\">\r\n                {error.message}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Signup;\r\n","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useMutation } from '@apollo/client';\r\nimport { LOGIN_USER } from '../utils/mutations';\r\n\r\nimport Auth from '../utils/auth';\r\n\r\n\r\n\r\n\r\nconst Login = (props) => {\r\n  const [formState, setFormState] = useState({ email: '', password: '' });\r\n  const [login, { error, data }] = useMutation(LOGIN_USER);\r\n\r\n  const handleChange = (event) => {\r\n    const { name, value } = event.target;\r\n\r\n    setFormState({\r\n      ...formState,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleFormSubmit = async (event) => {\r\n    event.preventDefault();\r\n    console.log(formState);\r\n    try {\r\n      const { data } = await login({\r\n        variables: { ...formState },\r\n      });\r\n\r\n      Auth.login(data.login.token);\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n\r\n    setFormState({\r\n      email: '',\r\n      password: '',\r\n    });\r\n  };\r\n\r\n  return (\r\n    <main className=\"flex-row justify-center mb-4\">\r\n      <div className=\"col-12 col-lg-10\">\r\n        <div className=\"card\">\r\n          <h2 className=\"card-header bg-dark text-white p-2 text-center\">Login</h2>\r\n          <div className=\"card-body\">\r\n            {data ? (\r\n              <p>\r\n                Welcome! You can now head{' '}\r\n                <Link to=\"/\">back to the homepage.</Link>\r\n              </p>\r\n            ) : (\r\n              <form onSubmit={handleFormSubmit}>\r\n                <input\r\n                  className=\"form-input\"\r\n                  placeholder=\"Your email\"\r\n                  name=\"email\"\r\n                  type=\"email\"\r\n                  value={formState.email}\r\n                  onChange={handleChange}\r\n                />\r\n                <input\r\n                  className=\"form-input\"\r\n                  placeholder=\"******\"\r\n                  name=\"password\"\r\n                  type=\"password\"\r\n                  value={formState.password}\r\n                  onChange={handleChange}\r\n                />\r\n                <button\r\n                  className=\"btn btn-block btn-primary justify-content-center\"\r\n                  style={{ cursor: 'pointer' }}\r\n                  type=\"submit\"\r\n                >\r\n                  Submit\r\n                </button>\r\n              </form>\r\n            )}\r\n\r\n            {error && (\r\n              <div className=\"my-3 p-3 bg-danger text-white errorMessage\">\r\n                {error.message}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst AllJournals = ({\r\n    journal= []\r\n})=> {\r\n    if(!journal.length){\r\n        return <h1>No Journals to display!</h1>\r\n    }\r\n    return (\r\n        <div>\r\n         {journal.map((journal)=>(\r\n        <div key = {journal._id} className = \"card mb-3\">   \r\n        <Link\r\n            className = \"text-light\"\r\n            to={`/journals/${journal._id}`}\r\n            >\r\n            Entry from {journal.createdAt}\r\n        </Link>\r\n        </div>\r\n    ))}\r\n        </div>\r\n      );\r\n    };\r\nexport default AllJournals","import React from 'react';\r\nimport { Navigate, useParams } from 'react-router-dom';\r\nimport { useQuery } from '@apollo/client';\r\nimport AllJournals from '../components/AllJournals';\r\nimport { QUERY_USER, QUERY_ME } from '../utils/queries';\r\nimport Auth from '../utils/auth';\r\nimport '../styles/Profile.css'\r\n\r\nconst Profile = () => {\r\n  const userData = Auth.getProfile;\r\n\r\n  const { loading, data } = useQuery(QUERY_ME)\r\n  const user = data?.me || {};\r\n  // if(Auth.loggedIn())\r\n  // {return <Navigate to =\"/myJournals\"/>}  //infinitely loops\r\n\r\n\r\n  if (loading) {\r\n    return <div>Fetching those journals....</div>;\r\n  }\r\n  if (!Auth.loggedIn) {\r\n    return (\r\n      <h1>\r\n        You need to be logged in to view your journals! Please log in!\r\n      </h1>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <main>\r\n      <div className=\"flex-row justify-center mb-3\">\r\n        <div className='justify-center'>\r\n          <h2 className=\"col-12 col-md-10 bg-dark text-light p-3 mb-5 myJournalsHeader\">\r\n            Viewing Your Profile.\r\n          </h2>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex-row col-12 col-md-10 mb-5 justify-center\">\r\n        <AllJournals\r\n          journals={user.journal}\r\n        />\r\n      </div>\r\n    </main>\r\n\r\n  )\r\n}\r\n\r\nexport default Profile","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport '../../styles/Header.css'\r\nimport Auth from '../../utils/auth';\r\n\r\n\r\n\r\nconst Header = () => {\r\n  const logout = (event) => {\r\n    event.preventDefault();\r\n    Auth.logout();\r\n  };\r\n\r\n\r\nreturn (\r\n  <header className=\"bg-primary text-light mb-4 py-3 flex-row align-center\">\r\n    <div className=\"container flex-row justify-space-between-lg justify-center align-center\">\r\n      <div className= \"container\">\r\n        <Link className=\"text-light\" to=\"/\">\r\n          <h1 className=\"m-0\">Letters to Quandale</h1>\r\n        </Link>\r\n      </div>\r\n      <div id='headerButtonsContainer'>\r\n      {Auth.loggedIn() ? (\r\n            <>\r\n              {/* <span>Hello {Auth.getProfile().data.username}!</span> */}\r\n              <Link className=\"btn btn-lg btn-info m-2 headerButton\" to=\"/\">\r\n               New Entry\r\n              </Link>\r\n              <Link className=\"btn btn-lg btn-info m-2 headerButton\" to=\"/myjournals\">\r\n               My Journals\r\n              </Link>\r\n              <button class=\"btn btn-lg btn-light m-2 headerButton\" onClick={logout}>\r\n                Logout\r\n              </button>\r\n            </>\r\n          ) : (\r\n              <>\r\n              <Link className=\"btn btn-lg btn-info m-2 headerButton\" to=\"/login\">\r\n                Login\r\n              </Link>\r\n              <Link className=\"btn btn-lg btn m-2 headerButton\" to=\"/signup\">\r\n                Sign up\r\n              </Link>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </header>\r\n );\r\n};\r\n\r\nexport default Header;\r\n\r\n\r\n\r\n\r\n","// import logo from './logo.svg';\r\nimport './App.css';\r\nimport React from 'react';\r\nimport {\r\n  ApolloClient,\r\n  InMemoryCache,\r\n  ApolloProvider,\r\n  createHttpLink,\r\n} from '@apollo/client';\r\nimport { setContext } from '@apollo/client/link/context';\r\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\r\n\r\n\r\nimport Home from './pages/Home';\r\nimport Signup from './pages/Signup';\r\nimport Login from './pages/Login';\r\nimport Profile from './pages/Profile'\r\n\r\nimport Journal from './components/Journal';\r\nimport AllJournals from './components/AllJournals';\r\nimport Header from './components/Header';\r\nimport Footer from './components/Footer';\r\nimport NewJournalEntry from './components/NewJournalEntry';\r\n\r\n\r\nconst httpLink = createHttpLink({\r\n  uri: '/graphql',\r\n});\r\n\r\n\r\nconst authLink = setContext((_, { headers }) => {\r\n  const token = localStorage.getItem('id_token');\r\n  return {\r\n    headers: {\r\n      ...headers,\r\n      authorization: token ? `Bearer ${token}` : '',\r\n    },\r\n  };\r\n});\r\n\r\nconst client = new ApolloClient({\r\n  link: authLink.concat(httpLink),\r\n  cache: new InMemoryCache(),\r\n});\r\n\r\nfunction App() {\r\n  return (\r\n    <ApolloProvider client={client}>\r\n      <Router>\r\n        <div className=\"flex-column justify-flex-start min-100-vh\">\r\n          <Header />\r\n          <div className=\"container\">\r\n            <Routes>\r\n              <Route \r\n                path=\"/\" \r\n                element={<Home />} \r\n              />\r\n              <Route \r\n                path=\"/login\" \r\n                element={<Login />} \r\n              />\r\n              <Route \r\n                path=\"/signup\" \r\n                element={<Signup />} \r\n              />\r\n              <Route \r\n                path=\"/myJournals\" \r\n                element={<Profile />} \r\n              />\r\n              <Route\r\n                path=\"/journal/:journalId\"\r\n                element = {<NewJournalEntry />}\r\n              />\r\n            </Routes>\r\n          </div>\r\n        </div>\r\n      </Router>\r\n    </ApolloProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import logo from './logo.svg';\r\n\r\n// import './App.css';\r\n\r\n// function App() {\r\n//   return (\r\n//     <div className=\"App\">\r\n//       <header className=\"App-header\">\r\n//         <img src={logo} className=\"App-logo\" alt=\"logo\" />\r\n//         <p>\r\n//           Edit <code>src/App.js</code> and save to reload.\r\n//         </p>\r\n//         <a\r\n//           className=\"App-link\"\r\n//           href=\"https://reactjs.org\"\r\n//           target=\"_blank\"\r\n//           rel=\"noopener noreferrer\"\r\n//         >\r\n//           Learn React\r\n//         </a>\r\n//       </header>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}
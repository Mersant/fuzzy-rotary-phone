(this["webpackJsonpletters-to-quandale"]=this["webpackJsonpletters-to-quandale"]||[]).push([[0],{76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t){},84:function(e,t,n){"use strict";n.r(t);var a,r,c,s,i,l,o,j=n(1),u=n.n(j),d=n(64),b=n.n(d),m=(n(76),n(18)),h=(n(77),n(68)),O=n(95),x=n(97),g=n(94),p=n(65),v=n(16),f=n(6),y=n(8),w=n(15),N=n(12),k=n(9),S=n(91),T=n(28),I=n(96),$=Object(I.a)(a||(a=Object(T.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),_=Object(I.a)(r||(r=Object(T.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),J=Object(I.a)(c||(c=Object(T.a)(["\n  mutation addJournal($journalText: String!,$image:String) {\n    addJournal(journalText:$journalText, image:$image) {\n      _id\n      journalText\n      image\n      createdAt\n    }\n  }\n"]))),B=(n(78),Object(I.a)(s||(s=Object(T.a)(["\n  query user($username: String!) {\n    user(username: $username) {\n      _id\n      username\n      journalHistory {\n        _id\n        journalText\n        image\n        createdAt\n      }\n    }\n  }\n"]))),Object(I.a)(i||(i=Object(T.a)(["\n  query getJournals {\n    journals {\n      _id\n      journalText\n      image\n      createdAt\n    }\n  }\n"]))),Object(I.a)(l||(l=Object(T.a)(["\n  query getSingleJournal($journalId: ID!) {\n    journal(journalId: $journalId) {\n      _id\n      image\n      journalText\n      createdAt\n    }\n  }\n"]))),Object(I.a)(o||(o=Object(T.a)(["\n  query me {\n    me {\n      _id\n      username\n      email\n      journal {\n        _id\n        journalText \n        image\n        createdAt\n      }\n    }\n  }\n"])))),C=n(26),E=n(27),q=n(55),A=new(function(){function e(){Object(C.a)(this,e)}return Object(E.a)(e,[{key:"getProfile",value:function(){return Object(q.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(q.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),Y=n(3),L=function(){var e=Object(j.useState)({journalText:"",image:""}),t=Object(k.a)(e,2),n=t[0],a=t[1],r=Object(S.a)(J),c=Object(k.a)(r,2),s=c[0],i=c[1],l=i.error,o=i.data,u=function(e){var t=e.target,r=t.name,c=t.value;a(Object(m.a)(Object(m.a)({},n),{},Object(N.a)({},r,c)))},d=function(){var e=Object(w.a)(Object(y.a)().mark((function e(t){var a;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,s({variables:Object(m.a)({},n)});case 4:a=e.sent,a.data,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),console.log(o);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(Y.jsxs)("main",{children:[A.loggedIn()?Object(Y.jsxs)("form",{id:"newJournalEntryForm",onSubmit:d,children:[Object(Y.jsx)("label",{htmlFor:"message",children:"Inscribe Thy Thoughts:"}),Object(Y.jsx)("div",{children:Object(Y.jsx)("textarea",{name:"journalText",type:"text",value:n.journalText,onChange:u,id:"journalEntryTextArea",className:"centerBlock",required:!0})}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)("label",{htmlFor:"image",children:"Bind Them to an Image:"}),Object(Y.jsx)("input",{name:"image",placeholder:"Imgur image link",id:"journalImageLink",type:"text",value:n.image,onChange:u})]}),Object(Y.jsx)("button",{id:"submitJournalButton",type:"submit",children:"And Commit them Eternally"})]}):Object(Y.jsxs)("p",{id:"loginError",children:["You need to be logged in to view your journal. Please"," ",Object(Y.jsx)(v.b,{className:"homeLink",to:"/login",children:"login"})," or ",Object(Y.jsx)(v.b,{className:"homeLink",to:"/signup",children:"signup."})]}),l&&Object(Y.jsx)("div",{className:"my-3 p-3 bg-danger text-white errorMessage",children:l.message})]})},D=function(e){var t=e.journal;return Object(Y.jsx)("main",{children:Object(Y.jsxs)("div",{className:"flex-row justify-center",children:[Object(Y.jsx)("div",{}),Object(Y.jsx)("div",{className:"col-12 col-md-8 mb-3",children:Object(Y.jsx)(L,{journals:t})})]})})},F=function(){var e=Object(j.useState)({username:"",email:"",password:""}),t=Object(k.a)(e,2),n=t[0],a=t[1],r=Object(S.a)(_),c=Object(k.a)(r,2),s=c[0],i=c[1],l=i.error,o=i.data,u=function(e){var t=e.target,r=t.name,c=t.value;a(Object(m.a)(Object(m.a)({},n),{},Object(N.a)({},r,c)))},d=function(){var e=Object(w.a)(Object(y.a)().mark((function e(t){var a,r;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,s({variables:Object(m.a)({},n)});case 5:a=e.sent,r=a.data,A.login(r.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(Y.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(Y.jsx)("div",{className:"col-12 col-lg-10",children:Object(Y.jsxs)("div",{className:"card",children:[Object(Y.jsx)("h2",{className:"card-header bg-dark text-white p-2 text-center",children:"Sign Up"}),Object(Y.jsxs)("div",{className:"card-body",children:[o?Object(Y.jsxs)("p",{children:["Welcome! You can now head"," ",Object(Y.jsx)(v.b,{to:"/",children:"back to the homepage."})]}):Object(Y.jsxs)("form",{onSubmit:d,children:[Object(Y.jsx)("input",{className:"form-input",placeholder:"Your username text",name:"username",type:"text",value:n.name,onChange:u}),Object(Y.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:n.email,onChange:u}),Object(Y.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:n.password,onChange:u}),Object(Y.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),l&&Object(Y.jsx)("div",{className:"my-3 p-3 bg-danger text-white errorMessage",children:l.message})]})]})})})},M=function(e){var t=Object(j.useState)({email:"",password:""}),n=Object(k.a)(t,2),a=n[0],r=n[1],c=Object(S.a)($),s=Object(k.a)(c,2),i=s[0],l=s[1],o=l.error,u=l.data,d=function(e){var t=e.target,n=t.name,c=t.value;r(Object(m.a)(Object(m.a)({},a),{},Object(N.a)({},n,c)))},b=function(){var e=Object(w.a)(Object(y.a)().mark((function e(t){var n,c;return Object(y.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(a),e.prev=2,e.next=5,i({variables:Object(m.a)({},a)});case 5:n=e.sent,c=n.data,A.login(c.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:r({email:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(Y.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(Y.jsx)("div",{className:"col-12 col-lg-10",children:Object(Y.jsxs)("div",{className:"card",children:[Object(Y.jsx)("h2",{className:"card-header bg-dark text-white p-2 text-center",children:"Login"}),Object(Y.jsxs)("div",{className:"card-body",children:[u?Object(Y.jsxs)("p",{children:["Welcome! You can now head"," ",Object(Y.jsx)(v.b,{to:"/",children:"back to the homepage."})]}):Object(Y.jsxs)("form",{onSubmit:b,children:[Object(Y.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:a.email,onChange:d}),Object(Y.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:a.password,onChange:d}),Object(Y.jsx)("button",{className:"btn btn-block btn-primary justify-content-center",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),o&&Object(Y.jsx)("div",{className:"my-3 p-3 bg-danger text-white errorMessage",children:o.message})]})]})})})},P=n(99),U=function(e){var t=e.journal,n=void 0===t?[]:t;return n.length?Object(Y.jsx)("div",{children:n.map((function(e){return Object(Y.jsx)("div",{className:"card mb-3",children:Object(Y.jsxs)(v.b,{className:"text-light",to:"/journals/".concat(e._id),children:["Entry from ",e.createdAt]})},e._id)}))}):Object(Y.jsx)("h1",{children:"No Journals to display!"})},H=(n(81),function(){A.getProfile;var e=Object(P.a)(B),t=e.loading,n=e.data,a=(null===n||void 0===n?void 0:n.me)||{};return t?Object(Y.jsx)("div",{children:"Fetching those journals...."}):A.loggedIn?Object(Y.jsxs)("main",{children:[Object(Y.jsx)("div",{className:"flex-row justify-center mb-3",children:Object(Y.jsx)("div",{className:"justify-center",children:Object(Y.jsx)("h2",{className:"col-12 col-md-10 bg-dark text-light p-3 mb-5 myJournalsHeader",children:"Viewing Your Profile."})})}),Object(Y.jsx)("div",{className:"flex-row col-12 col-md-10 mb-5 justify-center",children:Object(Y.jsx)(U,{journals:a.journal})})]}):Object(Y.jsx)("h1",{children:"You need to be logged in to view your journals! Please log in!"})}),W=(n(82),function(){return Object(Y.jsx)("header",{className:"bg-primary text-light mb-4 py-3 flex-row align-center",children:Object(Y.jsxs)("div",{className:"container flex-row justify-space-between-lg justify-center align-center",children:[Object(Y.jsx)("div",{className:"container",children:Object(Y.jsx)(v.b,{className:"text-light",to:"/",children:Object(Y.jsx)("h1",{className:"m-0",children:"Letters to Quandale"})})}),Object(Y.jsx)("div",{id:"headerButtonsContainer",children:A.loggedIn()?Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(v.b,{className:"btn btn-lg btn-info m-2 headerButton",to:"/",children:"New Entry"}),Object(Y.jsx)(v.b,{className:"btn btn-lg btn-info m-2 headerButton",to:"/myjournals",children:"My Journals"}),Object(Y.jsx)("button",{class:"btn btn-lg btn-light m-2 headerButton",onClick:function(e){e.preventDefault(),A.logout()},children:"Logout"})]}):Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(v.b,{className:"btn btn-lg btn-info m-2 headerButton",to:"/login",children:"Login"}),Object(Y.jsx)(v.b,{className:"btn btn-lg btn m-2 headerButton",to:"/signup",children:"Sign up"})]})})]})})}),z=(n(83),Object(h.a)({uri:"/graphql"})),Q=Object(p.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(m.a)(Object(m.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),V=new O.a({link:Q.concat(z),cache:new x.a});var G=function(){return Object(Y.jsx)(g.a,{client:V,children:Object(Y.jsx)(v.a,{children:Object(Y.jsxs)("div",{className:"flex-column justify-flex-start min-100-vh",children:[Object(Y.jsx)(W,{}),Object(Y.jsx)("div",{className:"container",children:Object(Y.jsxs)(f.c,{children:[Object(Y.jsx)(f.a,{path:"/",element:Object(Y.jsx)(D,{})}),Object(Y.jsx)(f.a,{path:"/login",element:Object(Y.jsx)(M,{})}),Object(Y.jsx)(f.a,{path:"/signup",element:Object(Y.jsx)(F,{})}),Object(Y.jsx)(f.a,{path:"/myJournals",element:Object(Y.jsx)(H,{})}),Object(Y.jsx)(f.a,{path:"/journal/:journalId",element:Object(Y.jsx)(L,{})})]})})]})})})};b.a.render(Object(Y.jsx)(u.a.StrictMode,{children:Object(Y.jsx)(G,{})}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.32607b1a.chunk.js.map